{% extends "layout.html" %}

{% block content %}
    <h1>  </h1>
    <div class="content-section">
      <form class="" action="" method="POST">
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
          <legend class="border-bottom mb-4">Podaj dane nowej krypty</legend>
          <div class="form-group">
              {{ form.nazwa_krypty.label(class="form-control-label")}}

              {% if form.nazwa_krypty.errors %}
                {{ form.nazwa_krypty(class="form-control form-control-lg is-invalid")}}
                <div class="invalid-feedback">
                    {% for error in form.nazwa_krypty.errors %}
                      <span>{{ error}}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form.nazwa_krypty(class="form-control form-control-lg")}}
                {% endif %}
          </div>
          <div class="form-group">
              {{ form.pojemnosc.label(class="form-control-label")}}

              {% if form.pojemnosc.errors %}
                {{ form.pojemnosc(class="form-control form-control-lg is-invalid")}}
                <div class="invalid-feedback">
                    {% for error in form.pojemnosc.errors %}
                      <span>{{ error}}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form.pojemnosc(class="form-control form-control-lg", type="number", value="1")}}
                {% endif %}
          </div>

      </fieldset>
      <div class="form-group">
          {{ form.submit(class="btn btn-outline-info") }}
      </div>
      </form>

    </div>
    <article class="media content-section custom-subtitle">
      <h2>Dostępne krypty</h2>
    </article>
    {% for krypta in krypty %}
    <article class="media content-section">
      <div class="media-body">
        <div class="article-metadata">
          <small class="text-muted">ID {{ krypta[0] }}</small>
          <small class="text-muted mr-4">Wybudowano {{ krypta[4] }}  </small>
        </div>
        <h2><a class="article-title" href="#">{{ krypta[1] }}</a></h2>
        <h4 class="article-content">Pojemność: {{ krypta[2]}}</h4>
        <div class="article-content">
          {% if not mieszkancy %}

          {% else %}
          {% for klient in mieszkancy %}
          <h2><a class="article-title" href="#">{{ klient[0] }}</a></h2>
          <p><b>Data urodzenia:</b> {{ klient[1] }} <br>
             <b>Data zgonu:</b> {{ klient[2] }}
             <b>Trumna:</b> {{ klient[3] }}</p>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </article>
    {% endfor %}
{% endblock content %}
